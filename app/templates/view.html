{% extends "base.html" %}

{% block title %}{{ news.title }}{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{{ url_for('index') }}">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li class="breadcrumb-item active">{{ news.title[:50] }}{% if news.title|length > 50 %}...{% endif %}</li>
            </ol>
        </nav>
        
        <article class="card">
            {% if news.image_url %}
                <img src="{{ news.image_url }}" class="card-img-top" alt="{{ news.title }}" style="max-height: 400px; object-fit: cover;">
            {% endif %}
            <div class="card-body">
                <h1 class="card-title">{{ news.title }}</h1>
                <div class="text-muted mb-3">
                    <small>
                        üë§ {% if news.author %}{{ news.author.username }}{% else %}–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π{% endif %}
                        | üìÖ {{ news.created_at.strftime('%d.%m.%Y %H:%M') }}
                        {% if news.updated_at %}
                            | ‚úèÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–æ: {{ news.updated_at.strftime('%d.%m.%Y %H:%M') }}
                        {% endif %}
                    </small>
                </div>
                <hr>
                <div class="card-text" style="font-size: 1.1em; line-height: 1.8;">
                    {{ news.content }}
                </div>
            </div>
            {% if g.user and news.user_id == g.user.id %}
            <div class="card-footer bg-white">
                <div class="d-flex gap-2">
                    <a href="{{ url_for('edit_news', news_id=news.id) }}" class="btn btn-warning">
                        ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å
                    </a>
                    <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal">
                        üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                    </button>
                    <a href="{{ url_for('index') }}" class="btn btn-secondary">
                        ‚Üê –ù–∞–∑–∞–¥
                    </a>
                </div>
            </div>
            {% endif %}
        </article>
    </div>
</div>

{% if g.user and news.user_id == g.user.id %}
<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å <strong>"{{ news.title }}"</strong>?</p>
                <p class="text-danger">–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
                <form action="{{ url_for('delete_news', news_id=news.id) }}" method="POST" style="display: inline;">
                    <button type="submit" class="btn btn-danger">–î–∞, —É–¥–∞–ª–∏—Ç—å</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}